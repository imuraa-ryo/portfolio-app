# Contact Form Setup

このサイトのフッター付近に配置した問い合わせフォームは `/api/contact` エンドポイントへ JSON を送信します。サーバー側は Node.js + Express + Nodemailer で実装され、環境変数に設定した SMTP 経由でメールを送信します。

## 1. 依存パッケージのインストール

```bash
npm install
```

## 2. 環境変数の設定

`.env.example` を `.env` にコピーし、各値を実際の SMTP / 送信先の情報に置き換えてください。

- `SMTP_HOST`, `SMTP_PORT`, `SMTP_USER`, `SMTP_PASS`: ご利用のメールサーバー情報
- `SMTP_SECURE`: SMTPS(465) など暗号化が必要な場合は `true`
- `MAIL_FROM`: 送信元として表示されるアドレス（未設定時は `SMTP_USER` を使用）
- `CONTACT_TO`: 問い合わせ内容の受信先メールアドレス
- `CORS_ORIGIN`: フロントエンドをホストするオリジン（カンマ区切り）

## 3. サーバーの起動

```bash
npm run start
```

デフォルトでは `http://localhost:3000` で待ち受けます。ポートを変更したい場合は `.env` の `PORT` を書き換えてください。

## 4. 動作フロー

1. フロントエンドのフォームで必須項目（お名前、メールアドレス、ご相談内容）を入力し送信
2. `scripts/main.js` が `/api/contact` に対して `fetch` で POST
3. サーバーは `nodemailer` を用いて指定の宛先にメール送信
4. レスポンスに応じてフロントエンドで成功／失敗メッセージを表示

## 5. 補足

- フォーム送信時にブラウザ側で簡易バリデーションを行います。
- 送信が失敗した場合は、レスポンスメッセージをそのまま表示します。サーバーログ（ターミナル）もご確認ください。
- データベースには保存を行わない構成です。
